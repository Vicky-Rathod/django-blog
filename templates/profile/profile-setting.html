{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load blog_templatetags %}
{% block head_title %}Profile settings{% endblock head_title %}

{% block extra_head %}

{% endblock extra_head %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-xl-6 m-auto">
      <div class="card mt-5">
        <div class="card-body">
          <div class="d-flex flex-column align-items-center">
            <div class="p-image-area">
              <img src="{{ profile.imageURL }}" alt="mdo" class="rounded-circle profile-image">
              <a href="{% url 'profile:update_profile_image' pk=profile.id %}" class="edit-btn"><i
                  class="fas fa-camera" id="id_icon"></i></a>
            </div>
          </div>
          <h5 class="mb-0">

            {% if profile.full_name %}
            {{ profile.full_name }}
            {% else %}
            @{{ profile.user }}
            {% endif %}
          </h5>
          <p class="mb-0">
            {{ profile.short_description }}
            <a href="{% url 'profile:short_description_update' user.pk %}"><i class="fas fa-edit"></i></a>
          </p>
        </div>
        <ul class="m-3 p-0">
          <li class="d-flex justify-content-between">{{ profile.user.username }} <a
              href="{% url 'account:username_change_view' user.pk %}">Edit</a></li>
          <hr class="mt-1 mb-1">
          <li class="d-flex justify-content-between">
            <h6>Info</h6> <a href="{% url 'profile:profile_info_update' profile.pk %}">Edit</a>
          </li>
          <li class="mt-1">{{ profile.full_name }}</li>
          <li class="mt-1">{{ profile.date_of_birth }}</li>
          <li class="mt-1">{{ profile.gender }}</li>
        </ul>
      </div>
    </div>
  </div>
</div>
</div>
<script type="text/javascript">
  enableImageOverly()

  function readURL(imageURL) {
    // TODO
  }
  // Enable Image Overly function
  function enableImageOverly() {
    var icon = document.getElementById("id_icon")
    icon.style.backgroundColor = "#0066ff"
    icon.style.color = "white"
    icon.style.fontSize = "16px"
    icon.style.padding = "20px 20px"
    icon.style.marginLeft = "20px"
    icon.style.borderRadius = "50%"
    icon.style.cursor = "pointer"

    var profileImage = document.getElementById("id_profile_image")
    profileImage.style.opacity = "1"
    profileImage.style.display = "block"
    profileImage.style.width = "100%"
    profileImage.style.height = "auto"
    profileImage.style.transition = ".5s ease"
    profileImage.style.backfaceVisibility = "hidden"
    profileImage.style.cursor = "pointer"

    var middleContainer = document.getElementById("id_middle_container")
    middleContainer.style.transition = ".5s ease"
    middleContainer.style.opacity = "0"
    middleContainer.style.position = "absolute"
    middleContainer.style.top = "50%"
    middleContainer.style.left = "50%"
    middleContainer.style.transform = "translate(-50%, -50%)"

    var imageContainer = document.getElementById("id_image_container")
    imageContainer.addEventListener('mouseover', function (e) {
      profileImage.style.opacity = "0.3"
      middleContainer.style.opacity = "1"
    })
    imageContainer.addEventListener("mouseout", function (e) {
      profileImage.style.opacity = "1"
      middleContainer.style.opacity = "0"
    })
    imageContainer.addEventListener("click", function (e) {
      profileImage.style.opacity = "1"
      middleContainer.style.opacity = "0"
    })
  }
</script>
{% endblock content %}